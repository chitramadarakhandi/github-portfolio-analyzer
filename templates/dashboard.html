<!DOCTYPE html>
<html>

<head>
    <title>Dashboard - GitHub Analyzer</title>
    <link rel="stylesheet" href="/static/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="dashboard">

        <h1>GitHub Portfolio Analyzer Dashboard</h1>

        <!-- Input -->
        <div class="card">
            <form method="post" action="/analyze">
                <input type="url" name="github_url"
                    placeholder="Enter GitHub Profile URL (e.g. https://github.com/torvalds)" required>
                <button type="submit">Analyze Profile</button>
            </form>
        </div>

        {% if error %}
        <div class="card" style="color:#ff6b6b;">
            {{ error }}
        </div>
        {% endif %}

        {% if result %}
        <div class="card">
            <h2>Portfolio Score: {{ result.total_score }}/100</h2>

            <div class="progress-container">
                <div class="progress-bar" style="width: {{ result.total_score }}%;">
                    <span class="progress-text">{{ result.total_score }}%</span>
                </div>
            </div>

            <h3>Score Breakdown</h3>
            <ul>
                {% for key, value in result.breakdown.items() %}
                <li><strong>{{ key }}</strong> : {{ value }}</li>
                {% endfor %}
            </ul>

            <div class="chart-container">
                <canvas id="scoreChart"></canvas>
            </div>
        </div>

        <!-- Structured AI Feedback -->
        <div class="card">
            <h3>AI Recruiter Evaluation</h3>

            <h4 style="color:#22c55e;">ðŸŸ¢ Strengths</h4>
            <ul>
                {% for item in ai_feedback.strengths %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>

            <h4 style="color:#ef4444;">ðŸ”´ Weaknesses</h4>
            <ul>
                {% for item in ai_feedback.weaknesses %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>

            <h4 style="color:#3b82f6;">ðŸ›  Improvement Plan</h4>
            <ul>
                {% for item in ai_feedback.suggestions %}
                <li>{{ item }}</li>
                {% endfor %}
            </ul>
        </div>

        <script>
            const ctx = document.getElementById('scoreChart');

            new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: [
                        {% for key in result.breakdown.keys() %}
                    "{{ key }}",
                    {% endfor %}
                ],
                datasets: [{
                    label: 'Portfolio Analysis',
                    data: [
                        {% for value in result.breakdown.values() %}
                        {{ value }},
                {% endfor %}
            ],
                fill: true,
                backgroundColor: 'rgba(59,130,246,0.2)',
                borderColor: '#3b82f6'
                }]
            },
                options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    r: {
                        min: 0,
                        max: 20
                    }
                }
            }
        });
        </script>
        {% endif %}

        <footer style="margin-top:40px; text-align:center; opacity:0.6;">
            Built by Chitra Madarakhandi | AI-Powered GitHub Evaluation System
        </footer>

    </div>
</body>

</html>